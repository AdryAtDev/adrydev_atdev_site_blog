<!-- @format -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta
      name="description"
      content="ATDEV Blog"/>
    <meta
      http-equiv="X-UA-Compatible"
      content="IE=edge"/>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"/>
    <link
      rel="shortcut icon"
      href=""
      type="image/x-icon"/>
    <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">

    {# BEGIN CSS IMPORTS #}
    {% include "../components/blocks/cssMinifier.block.njk" %}
    {# END CSS IMPORTS #}

    {# BEGIN JS IMPORTS #}
    <script defer src="/assets/js/sort-posts.js"></script>
    <script defer src="/assets/js/header.js"></script>
    <script defer type="text/javascript" src="/assets/js/search.js"></script>
    <script defer type="text/javascript" src="/assets/js/mixpanel.js"></script>
    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>
    {# END JS IMPORTS #}

    <title>{{ title }}</title>
  </head>
  <body>
    <span index="top"></span>
    {% from "../components/macros/introduction.macro.njk" import macro_intro %}

    {{ macro_intro('Blog', 'ATDEV', 'We build your ideas, we build your team', 'https://deploy-preview-17--atdev-testing.netlify.app/pages/en/') }}

    {% include "../components/blocks/header.block.njk" %}

    {# BEGIN MAIN CONTENT #}
    <main>
      {{ content | safe }}
    </main>
    {# END MAIN CONTENT #}

    <a onclick="mixpanel.track('Go Top Page Button - Blog')" id="scroll-button" href="#top">
      <img src="/assets/icons/up-arrow-icon.png" alt="Up arrow icon"/>
    </a>

    <script>
      // Envía mensajes al padre (página principal) para controlar el scroll
      function sendParentMessage(message) {
        window
          .parent
          .postMessage(message, "https://glittering-bienenstitch-0faf49.netlify.app/pages/blog/");
      }

      // Detecta el evento de desplazamiento en el footer
      window.addEventListener("scroll", function () {
        var footer = document.querySelector("footer");

        // Obtiene la posición del footer con respecto a la parte superior del iframe
        var footerPosition = footer
          .getBoundingClientRect()
          .top;

        // Obtiene la altura del iframe visible
        var iframeHeight = window.innerHeight;

        // Si el footer se encuentra visible en el iframe
        if (footerPosition <= iframeHeight) {
          sendParentMessage("showScrollbar");
        } else {
          sendParentMessage("hideScrollbar");
        }
      });
    </script>
  </body>
</html>